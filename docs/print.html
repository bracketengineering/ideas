<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Bracket Engineering Ideas</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="SMP/overview.html"><strong aria-hidden="true">1.</strong> System Managment Platform</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="SMP/tech_info.html"><strong aria-hidden="true">1.1.</strong> The Tech</a></li><li class="chapter-item expanded "><a href="SMP/details.html"><strong aria-hidden="true">1.2.</strong> Details</a></li></ol></li><li class="chapter-item expanded "><a href="CIaaS/overview.html"><strong aria-hidden="true">2.</strong> Cloud Infrastructure Drag and Drop(IaaS)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="CIaaS/tech.html"><strong aria-hidden="true">2.1.</strong> The Tech</a></li><li class="chapter-item expanded "><a href="CIaaS/details.html"><strong aria-hidden="true">2.2.</strong> Details</a></li></ol></li><li class="chapter-item expanded "><a href="updates/overview.html"><strong aria-hidden="true">3.</strong> Updates</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="updates/nov.html"><strong aria-hidden="true">3.1.</strong> November 2022</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> EXAM PERIOD</div></li><li class="chapter-item expanded "><a href="updates/dec.html"><strong aria-hidden="true">3.3.</strong> December 2022</a></li><li class="chapter-item expanded "><a href="updates/jan.html"><strong aria-hidden="true">3.4.</strong> January 2023</a></li><li class="chapter-item expanded "><a href="updates/feb.html"><strong aria-hidden="true">3.5.</strong> February 2023</a></li><li class="chapter-item expanded "><a href="updates/mar.html"><strong aria-hidden="true">3.6.</strong> March 2023</a></li><li class="chapter-item expanded "><a href="updates/apr.html"><strong aria-hidden="true">3.7.</strong> April 2023</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Bracket Engineering Ideas</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="system-managment-platform"><a class="header" href="#system-managment-platform">System Managment Platform</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-tech-we-would-use"><a class="header" href="#the-tech-we-would-use">The tech we would use</a></h1>
<ul>
<li>The state of the entire system is verified via a hash chain
<ul>
<li>the hash chain will be formed via the <code>keccak256</code> of all of the state hashes of all of the devices in the system</li>
</ul>
</li>
<li>on-device software written in C++ or Rust for speed</li>
<li>built for the ARM architecture</li>
<li>our main platform will be built in JavaScript, C++, Python
<ul>
<li>Servers will be on-premises and backups on the cloud</li>
</ul>
</li>
<li>We will have an API for C/C++, C#, Java, Lisp, MATLAB, Pascal, Python, Rust, HDLs (Future Integration for Carbon)
<ul>
<li>API will also allow clients to deploy their own custom code to decide what information they want to be sent (via JSON or Binary) to their devices to control them based on updates/alerts on our platform</li>
<li>This can be done on our own in-app code platform or on separate, device-specific software</li>
</ul>
</li>
<li>We will use mapping to display the location of devices</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="technical-details"><a class="header" href="#technical-details">Technical Details</a></h1>
<h3 id="private-keys-and-hashing"><a class="header" href="#private-keys-and-hashing">Private Keys and Hashing</a></h3>
<ul>
<li>
<p>Private key is a randomly generated, 256 bit number</p>
<ul>
<li>private key = \(k\)</li>
</ul>
</li>
<li>
<p>multiply (dot) this private key by the Generator point, \(G\), (is the same every time) using elliptic curve multiplication (we can choose G)</p>
<ul>
<li>\(G\) is of the form \((x, y)\)</li>
<li>Elliptic curve multiplication is just Elliptic curve addition up to \(k\)</li>
<li>\(K = k \cdot G = G + G+ G ...\) (up to k times)</li>
<li>This gives you a new (very large) point</li>
<li>Say you want to add two points to get a new point. Addition on an elliptic curve is done by doing.</li>
</ul>
<p>\[
P_1 + P_2 = \dot{P_3}
\]</p>
<p>\[
P_3 = \text{reflection of }\dot{P_3} \text{ in } x \text{ axis } \implies P_3(x, y) = \dot{P_3}{{(x,-y)}}
\]</p>
<ul>
<li>this can be done using a <code>secp256k1</code> library</li>
<li><code>secp256k1</code> produces the equation:</li>
</ul>
<p>\[
y^2 \mod p= (x^3 +7) \mod p
\]</p>
<p>where \(p = 2^{256} - 2^{32} - 2^9 - 2^8- 2^7- 2^6 - 2^4 -1\)</p>
</li>
<li>
<p>\(K=\) concatenation of the 32 byte x-coordinate and the 32 byte y-coordinate from the elliptic curve multiplication</p>
</li>
<li>
<p>Then use <code>Keccak-256</code> on \(K=\) to get a useable public ID</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-infrastructure-drag-and-dropiaas"><a class="header" href="#cloud-infrastructure-drag-and-dropiaas">Cloud Infrastructure Drag and Drop(IaaS)</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-tech"><a class="header" href="#the-tech">The Tech</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="details"><a class="header" href="#details">Details</a></h1>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="november-2022"><a class="header" href="#november-2022">November 2022</a></h1>
<hr />
<h2 id="november-9th-2022--first-meeting"><a class="header" href="#november-9th-2022--first-meeting">November 9th 2022 – <em>First Meeting</em></a></h2>
<p><strong>TLDR;</strong>
<strong>Things Completed:</strong> Initial Infrastructure plan and design ideas 
<strong>Issues:</strong> Figuring out how to implement meal recommendations and what databases we will need
<strong>Solutions:</strong> AWS’s Graph Database, Neptune. </p>
<p>We have decided on and initial infrastructure and planned how features are going to work.
Our current infrastructure plan is as follows: Kubernetes ran on Fargate through EKS for computing. These Kubernetes will contain code to access databases and compute meal recommendations. Our databases will be Neptune for user and meal relationships, DynamoDB for storing simple key-value data pairs and then Redshift for storing metadata for analytics. </p>
<p>We are currently working on learning how to use Kubernetes, how we need to lay out data in the databases, and how to interact with the databases.</p>
<hr />
<h2 id="november-16th-2022--revising-infrastructure"><a class="header" href="#november-16th-2022--revising-infrastructure">November 16th 2022 – <em>Revising Infrastructure</em></a></h2>
<p><strong>TLDR;</strong>
<strong>Things Completed:</strong> A new revision of infrastructure and a deeper understanding of database layout.
Issue: What infrastructure to use
Solution: Kubernetes are not needed as our system is not big enough plus they are expensive, can use Docker containers with ECS and Fargate on AWS.</p>
<p>After looking over our current infrastructure, we realised that using Kubernetes would be more effort than it would be worth. Our system was not yet big enough or distributed enough to require Kubernetes. Originally, taking inspiration from how SnapChat’s infrastructure works, we were going to use Kubernetes ran on AWS Fargate through EKS. We found very quickly that this was going to be very expensive but also extremely time consuming to not only set up but also teach ourselves how to use Kubernetes. To save this time and money we are now looking at using Docker containers ran on AWS Fargate though ECS/ECR.</p>
<hr />
<h2 id="november-30th-2022--general-update"><a class="header" href="#november-30th-2022--general-update">November 30th 2022 – <em>General update</em></a></h2>
<p><strong>TLDR;</strong> 
<strong>Things Completed:</strong> Initial static design of main meal card and quick meals meal cards
<strong>Issues:</strong> Ran into front-end issues with meal cards moving more on Android devices
<strong>Solutions:</strong> Solved by …</p>
<p>Will is currently working on interacting with Neptune and getting a basic API to work. Xav is working on creating an API to interact with AWS S3. George has begun coding the main feature of the app such as, the meal cards for the explore page and quick meals.
We will be doing less work for the following month as we have exams.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="decmeber-2022"><a class="header" href="#decmeber-2022">Decmeber 2022</a></h1>
<hr />
<p>## December 21nd 2022 – <em>Revising infrastructure</em></p>
<p><strong>TLDR;</strong>
<strong>Things Completed:</strong> Revision of Technical plan
<strong>Issues:</strong> AWS Fargate and Redshift will be too expensive
<strong>Solutions:</strong> Using AWS Lambda instead of Fargate, and using S3 to store metadata instead of in redshift</p>
<p>After going over our use case and what services we need, we realised we had underestimated the size of data we would need, but more importantly, the full costs of using a big enough system with Fargate and Redshift. The costs from using Fargate with ECS and Redshift Serverless would cost anywhere from $500 to $300 USD per month (depending on how many containers run on Fargate and how many hours we need to use Redshift for) 
This is far beyond our budget, so we decided the best balance between performance and cost is AWS Lambda and S3. We will store user metadata in S3 so that it can be used later for customer analytics. AWS Lambda will provide us with very cheap, easy to use and access compute power for the simple requests that will be coming into our infrastructure. </p>
<p>Any other additional computing power we need will be completed using short lived EC2 instances. Examples of this could be calculating customer analytics, calculating meal recommendations, or any other internal computing we need doing.</p>
<p>We will all be taking a short break over the Christmas and New Year Period</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="january-2023"><a class="header" href="#january-2023">January 2023</a></h1>
<hr />
<h2 id="january-9th-2023--update"><a class="header" href="#january-9th-2023--update">January 9th 2023 – <em>Update</em></a></h2>
<p><strong>TLDR;</strong>
<strong>Things Completed:</strong> S3 API, Basic Neptune API to add, remove and update vertices. Plan for meal recommendations.
<strong>Issues:</strong> The JavaScript implementation of Apache Gremlin has holes in its implementation and a huge lack of documentation so have had difficult time with low level commands.
<strong>Solutions:</strong> Trialling different JavaScript implementations of Gremlin</p>
<p>Xav’s S3 API completed and working. Xav is now working on a dynamo API 
Will has basic Neptune working, he is now working on building the recommendation engine, we plan to use basic, non-ML collaborative filtering for the moment. This will consist of computing a cosine similarity matrix between all users which is a normalised value between 0 and 1 which determines how similar one user is to another; 1 being completely alike, 0 being not at all. We then determine how much a user may like a certain meal by multiplying all other user’s similarity values by how much each corresponding user likes that meal. We believe this is a good compromise for accuracy, time, and cost before we can transition to using ML powered recommendations.</p>
<hr />
<p>## January 23rd 2023 – <em>Project Update</em></p>
<p><strong>TLDR;</strong> 
<strong>Things Completed:</strong> Initial static design of main meal card and quick meals meal cards, Recommendation Engine is now completed. Dynamo API also completed
<strong>Issues:</strong> AWS Cognito SDK not working, is also overly complicated for our use case. 
<strong>Solutions:</strong> Pivoting to use the AWS Amplify SDK instead as it provides higher level functions making implementing user authentication easier and faster.</p>
<p>Will has finished the meal recommendation engine using a cosine similarity matrix. Xav has finished the DynamoDB API and has both the DynamoDB API and the S3 API working from Lambda functions. George has finished the static meal cards.</p>
<p>Xav is now going to work on adding API gateway to access these Lambda functions from the client side. 
George is now going to be working on the Account and login pages. This will allow authenticated requests to be made from the client side to the lambda functions. Xav is also going to be helping George implement authentication via AWS Amplify</p>
<p>Will is now going to start on a web scraper to pull recipes from the internet. Recipes are factual therefore cannot be copyrighted themselves; we will remove any opinion or otherwise copyrightable material to ensure we can use them. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="february-2023"><a class="header" href="#february-2023">February 2023</a></h1>
<hr />
<p>## February 11th 2023 – <em>Sign up and sign in functionality now working and changed app name to Cookly</em></p>
<p><strong>TLDR;</strong>
<strong>Things Completed:</strong> Authentication scripts using the AWS Amplify Auth Library are now completed. We have added this functionality to the login pages which have also been completed.
<strong>Issues:</strong> Authentication listeners to allow for automatic sign in after sign up are not working 
<strong>Solutions:</strong> Reconfigured AWS amplify with cognito and changed our listeners to listen to all Auth events instead of specific events</p>
<p>Firstly, we decided that Quick Meals was not a solid enough name in terms of marketing and likeability. We have changed it to Cookly as we feel it is friendlier and easier to do marketing with. </p>
<p>We have also finished the sign up and sign in pages and implemented the respective authentication functionality to them. The main issues we had were with the sign up functionality. We wanted an event listener to listen for the sign up event and automatically sign in the user after they signed up. 
We fixed this issue by changing the event listeners and reconfiguring amplify as the amplify listener we were using was configured to an old user pool. </p>
<hr />
<p>## February 16th 2023 – <em>Auto sign in and all other authentication functionality for sign up now working</em></p>
<p><strong>TLDR;</strong>
<strong>Things Completed:</strong> Check on app load for current session to automatically sign in a user, 
API scripts for signing out locally and globally, and for sending email confirmation codes. 
<strong>Issues:</strong> Creating a user in Cognito GUI leaves flag on for password verification meaning getting current session returns nothing
<strong>Solutions:</strong> Using the actual sign up process with email verification ensures there are no flags for password verification</p>
<hr />
<h2 id="february-23rd-2023--api-scripts-for-changing-credentials-now-working"><a class="header" href="#february-23rd-2023--api-scripts-for-changing-credentials-now-working">February 23rd 2023 – <em>API scripts for changing credentials now working</em></a></h2>
<p><strong>TLDR;</strong>
<strong>Things Completed:</strong> API scripts for changing and verifying credentials.
<strong>Issues:</strong> 
<strong>Solutions:</strong></p>
<p>Xav has finished writing all the scripts for changing and updating attributes. </p>
<p>George has been working on compartmentalising all of the components into smaller files for ease of use across the app. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="march-2023"><a class="header" href="#march-2023">March 2023</a></h1>
<hr />
<h2 id="march-1st-2023-all-low-level-backend-apis-now-configured-as-a-class-and-all-page-design-finished"><a class="header" href="#march-1st-2023-all-low-level-backend-apis-now-configured-as-a-class-and-all-page-design-finished">March 1st 2023: <em>All Low Level Backend APIs now configured as a class and all page design finished</em></a></h2>
<p><strong>TLDR;</strong></p>
<ul>
<li><strong>Things Completed:</strong> Converted the Dynamo, S3 and Neptune APIs to classes, all front end page design has been finished</li>
<li><strong>Issues:</strong> </li>
<li><strong>Solutions:</strong></li>
</ul>
<p>We have converted the Dynamo, S3 and Neptune APIs to classes for ease of use and interoperability. It makes it far easier and neater to use in our Lambda functions. We will use these Classes via Layers in our Lambda functions</p>
<p>All low level backend classes should be used as outlined in the following:</p>
<pre><code class="language-JavaScript">/*
Class Names:
    dynamoDBClient for Dynamo
    s3Client for S3
    NeptuneClient for Neptune
*/
import ClassName from '/Layers/ClassName'

const class = new ClassName();

//promise
class.method(params)
    .then((result) =&gt; ...)

//async 
await class.method(params);
// then code to deal with result
</code></pre>
<hr />
<p>## March 5th 2023 – <em>Completed website</em></p>
<p><strong>TLDR;</strong></p>
<ul>
<li><strong>Things Completed:</strong> Landing page, Team about page, and Cookly page are completed</li>
<li><strong>Issues:</strong> </li>
<li><strong>Solutions:</strong></li>
</ul>
<p>The landing page is a simple page with navigation links. The Team page just gives an overview who we all are and what our respective roles are within the company. The cookly page gives a product overview of the app; we are waiting on infographics from George to finish that bit completely</p>
<hr />
<p>## March 10th 2023 – <em>Code for Lambda functions now completed</em></p>
<p><strong>TLDR;</strong></p>
<ul>
<li><strong>Things Completed:</strong> High level lambda functions are now complete.</li>
<li><strong>Issues:</strong> </li>
<li><strong>Solutions:</strong></li>
</ul>
<hr />
<p>## March 14th 2023 – <em>Cognito Authentication APIs and front end converted to a class</em></p>
<p><strong>TLDR;</strong></p>
<ul>
<li><strong>Things Completed:</strong> Cognito API simplified and converted to a class. API caller class made for calls to lambda functions</li>
<li><strong>Issues:</strong> </li>
<li><strong>Solutions:</strong> </li>
</ul>
<p>Makes it far easier for George to implement authentication. Enables far easier error handling as the async functions are dealt with in the class. Amplify’s Auth Library is used to get the current user meaning George has to submit less information into the function calls leaving less room for error. 
The Cognito class should be instantiated and used like the following:</p>
<pre><code class="language-JavaScript">import CognitoAPI from '/apiScripts/amplify/CognitoAPI'

const cognito = new Cognito();

//promise
cognito.method(params)
    .then((result) =&gt; ...)
</code></pre>
<p>The API Caller class was created to enable extremely easy integration into the front end components. The API Caller class should be instantiated and used like the following.</p>
<pre><code class="language-JavaScript">import APICaller from '/apiScripts/apiCalls/apiCaller'

const api = new APICaller();

//promise
api.method(params)
    .then((result) =&gt; ...)

//async 
await api.method(params);
// then code to deal with result
</code></pre>
<p>The API Caller Methods use a private <code>#genericCall</code> function (outlined below) to make the actual request to the respective API endpoint. Each method submits the type of request (get or set), the endpoint path of the request, and the payload data for the request. This structure allows for the most compact class and method input size as possible.</p>
<hr />
<p>## March 19th 2023 – </p>
<h3 id="web-scraper-for-recipes-redone"><a class="header" href="#web-scraper-for-recipes-redone"><em>Web Scraper for recipes redone</em></a></h3>
<p><strong>TLDR;</strong></p>
<ul>
<li><strong>Things Completed:</strong> The web scraper has been redone to work with more websites</li>
<li><strong>Issues:</strong> We were restricted to using only one website with the original </li>
<li><strong>Solutions:</strong> We have made the webscraper more general purpose so that it works with more websites</li>
</ul>
<hr />
<h2 id="march-21st-2023-"><a class="header" href="#march-21st-2023-">March 21st 2023 –</a></h2>
<h3 id="issue-loading-data-from-s3-into-flatlist-and-global-colour-scheme-implemented"><a class="header" href="#issue-loading-data-from-s3-into-flatlist-and-global-colour-scheme-implemented"><em>Issue Loading data from S3 into FlatList and Global colour scheme implemented</em></a></h3>
<p><strong>TLDR;</strong></p>
<ul>
<li><strong>Things Completed:</strong> Lambda functions for rating meals, saving meals, and signing up users getting. The API Caller class has been expanded to accommodate these new lambdas.</li>
<li><strong>Issues:</strong> When creating a FlatList in the front end the way we were calling the back end was not working </li>
<li><strong>Solutions:</strong> Promises, useEffect, flat list render function</li>
</ul>
<p>We have added lambda functions for rating meals, saving meals and signing up new users. The signing up users lambda function signs up a user via Amplify to Cognito but also creates a user node in Neptune and also sets a custom Cognito attribute as the Neptune ID so we can use the Neptune ID when making requests to the backend.</p>
<p>We had a set-back of around a day as the way we were rendering items in the flat list was not working with our async API calls. We also had a huge issue with using asynchronous calls within React Native components, so we decided to change to using promises. Instead of waiting for a function to return the actual promise before the next piece of code could be executed using async/await, which React Native does not like, Promises just return the promise object which <code>.then()</code> can then access but only when a promise has been returned. </p>
<p>Using promises works far better and much more consistently with React Native and it also allows for parallel API calls instead being restricted to only using sequential calls. This will allow us to massively decrease the response times of the app.</p>
<hr />
<p>## March 22nd 2023 – <em>Error Message information not being returned from async function correctly</em></p>
<p><strong>TLDR;</strong></p>
<ul>
<li><strong>Things Completed:</strong> Most methods in the API caller class have been implemented. George has finished the redesign of the main meal card</li>
<li><strong>Issues:</strong> Errors being returned from try/catch blocks are not being displayed correctly in the front end</li>
<li><strong>Solution:</strong> Using promises ensures that errors are caught and can be returned so they can be shown on the screen.</li>
</ul>
<p>We implemented all of the main back end functionality into the front end. Images and text are all displayed correctly. The main issue we have run into is errors from Cognito not being displayed properly when returned via a try/catch async block. We found the solution to this was using a promise.</p>
<p>Here is an example of the before and after:</p>
<pre><code class="language-JavaScript">//BEFORE
async signIn(username, password) {
    try {
        const user = await Auth.signIn(username, password);
        return user;
    } catch (error) {
        console.log(&quot;error signing in&quot;, error);
        return 0;
    }
}
//AFTER
async signIn(username, password) {
    return new Promise(async (resolve, reject) =&gt; {
       try {
         const user = await Auth.signIn(username, password);
         resolve(user);
       } catch (error) {
         reject(error);
       }
     });
}
</code></pre>
<p>Rejecting the error via a promise allows us to display the error message on screen along with red outlining of the text input box where there was an error.</p>
<hr />
<p>## March 24th 2023 – <em>Wrong structure of Neptune graph and database infrastructure</em></p>
<p><strong>TLDR;</strong></p>
<ul>
<li><strong>Things Completed:</strong> </li>
<li><strong>Issues:</strong> Our current database infrastructure was poorly designed for easily adding features in the future, and the addition of machine learning infrastructure</li>
<li><strong>Solutions:</strong> Redesign our infrastructure to rely more on Neptune and redesign how we connect data</li>
</ul>
<p>We have realised that the way we have configured our database infrastructure does not work well for when we want to add new features or ML capabilities. We would have to redo large parts of the system and large parts of the data would have to be duplicated as it is not connected correctly. Therefore, the best solution to this was to redesign Neptune. We are going to have virtually all data in Neptune except user and app metadata which will be stored in S3, and … in Dynamo DB</p>
<p>We will store, users, meals, and ingredients as nodes in Neptune, with the links between each node representing how they are related. See below for a more detailed overview</p>
<p><img src="updates/./neptune_structure.png" alt="Neptune Structure" /></p>
<p>Reconfiguring the Neptune API we already have will not take too long as we just have to change which nodes and edges we are using, and not much of the underlying logic. This new structure also allows for a large performance increase as we can get virtually all the information we need from the graph in a single query. Moreover, as the graph scales, querying the database remain extremely fast. It also makes it extremely easy to add functionality for new features as we can just connect into to pre-existing data and relationships.</p>
<p>The final benefit of this is the ease of use of Neptune ML. With all our data and relationships being stored in the same place, it makes using machine learning far easier and much more accurate. Using Neptune ML with a relationship rich graph will greatly improve how we recommend meals to users and will allow a greater depth and mix of prediction types. We will also be able to use Neptune ML for future features such as ingredient substitution.</p>
<hr />
<h2 id="march-29th-2023--major-updates"><a class="header" href="#march-29th-2023--major-updates">March 29th 2023 – <em>Major updates</em></a></h2>
<p><strong>TLDR;</strong></p>
<ul>
<li><strong>Things Completed:</strong> Internal Docs have been updated to reflect all our changes, recipe walk through design completed</li>
<li><strong>Issues:</strong></li>
<li><strong>Solutions:</strong></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="april-2023"><a class="header" href="#april-2023">April 2023</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
